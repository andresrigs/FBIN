unique_name: New Calculation
object_type: metric_calc
label: New Calculation
expression: |-
  IIF(
      COUNT(
          NONEMPTY(
              [DateDim].[datecustom_dimension Hierarchy].[dateL].Members,
              [Measures].[SalesAmount]
          )
      ) = 0,
      NULL,
      AVG(
          NONEMPTY(
              [DateDim].[datecustom_dimension Hierarchy].[dateL].Members,
              [Measures].[SalesAmount]
          ),
          SUM(
              NONEMPTY(
                  [orderD].[orderH].[order].members,
                  [Measures].[Weight]
              ),
              [Measures].[SalesAmount]
          )
      )
  )
